# TasksFromTodoist

A complete **desktop task management system** that fetches your Todoist tasks and displays them as a beautiful desktop widget using Rainmeter. This project generates the task data file that your Rainmeter skin reads to create an always-visible task display on your desktop.

## 🎯 Complete System Overview

This project works in combination with a Rainmeter skin to create a full desktop experience:

1. **TodoistTaskFetcher** (this project) → Fetches tasks from Todoist API → Saves to text file
2. **Rainmeter Skin** (in your Documents/Rainmeter/Skins folder) → Reads text file → Displays on desktop
3. **Result** → Beautiful, always-visible task widget on your Windows desktop

## �️ What You Get

### Text File Output (Always Generated)
```
TASKS:
1) Complete project documentation
2) Review pull requests  
3) Update website content
4) Call dentist
```

### Desktop Widget (With Rainmeter Integration)
A gorgeous desktop widget featuring:
- ✨ Your Todoist tasks with beautiful typography
- 🎨 Blurred wallpaper background that updates automatically
- 🔄 Click-to-refresh functionality  
- 🎯 Always visible task overview
- ⚙️ Fully customizable appearance

## ⚡ System Requirements

### Essential (For Task Text File)
- **Windows 10/11**
- **Internet connection** (to fetch tasks from Todoist)
- **PowerShell** (included with Windows)

### For Complete Desktop Widget Experience
- **Rainmeter** installed
- **Rainmeter Todoist Skin** (separate, in your Documents folder)
- **ImageMagick** (for wallpaper effects)

**Note**: The task fetching works independently - you get a text file even without Rainmeter!

## 📁 Project Structure

### This Repository (TodoistTaskFetcher)
```
TasksFromTodoist/
├── src/                      # Source code
│   ├── main.cpp             # Main task fetcher application
│   └── todoist_fetcher.hpp  # Header definitions  
├── scripts/                  # Automation scripts
│   ├── todoistRefresh.ps1   # Main automation script
│   └── setup.ps1            # Project setup script
├── build/                    # Build output (generated)
├── output/                   # Task output files (generated)  
├── config/                   # Configuration files
│   └── config.example.json  # Configuration template
├── docs/                     # Documentation
└── README.md                # This file
```

### Your Rainmeter Skin (Separate, in Documents Folder)
```
C:\Users\YourName\Documents\Rainmeter\Skins\Todoist\
├── Main/
│   └── Todoist.ini          # Main skin configuration
├── @Resources/
│   ├── LuaTextFile.lua     # Script to read task file
│   ├── todoistTasks.txt    # ← Generated by this project
│   ├── dimensions.txt      # ← Generated by this project  
│   └── Images/
│       ├── blurImage.jpg   # ← Generated by this project
│       └── refresh.png     # Refresh button icon
└── Mail/ (optional)
    └── Mail.ini            # Mail skin configuration
```

### How They Work Together
1. **This project** generates the task file and images
2. **Your Rainmeter skin** reads those files and displays them
3. **Result**: Beautiful desktop widget with your Todoist tasks!

## 📚 Documentation

- **[🚀 Getting Started](GETTING_STARTED.md)** - Complete beginner's guide with 5-minute setup
- **[🎨 Rainmeter Integration](RAINMETER_INTEGRATION.md)** - Complete desktop widget setup guide
- **[📦 Installation Guide](INSTALLATION.md)** - Step-by-step installation help for all components
- **[💡 Usage Examples](USAGE_EXAMPLES.md)** - Different ways to use the application  
- **[❓ FAQ](FAQ.md)** - Common questions and troubleshooting
- **[🔧 Build Instructions](docs/BUILD.md)** - Detailed build and troubleshooting guide
- **[📝 Changelog](CHANGELOG.md)** - Version history and changes

## 🤔 Which Guide Do I Need?

- **Brand new to this?** → Start with [`GETTING_STARTED.md`](GETTING_STARTED.md)
- **Want the desktop widget?** → See [`RAINMETER_INTEGRATION.md`](RAINMETER_INTEGRATION.md)
- **Having installation issues?** → Check [`INSTALLATION.md`](INSTALLATION.md)
- **Want to see what's possible?** → Browse [`USAGE_EXAMPLES.md`](USAGE_EXAMPLES.md)
- **Have a quick question?** → Check [`FAQ.md`](FAQ.md)
- **Need to customize/build manually?** → See [`docs/BUILD.md`](docs/BUILD.md)

## 🎮 Usage Examples

### Just Get Your Tasks (No Desktop Widget)
```powershell
# Get tasks and save to a text file
.\scripts\todoistRefresh.ps1 -SkipWallpaper -SkipRainmeter
# Your tasks are now in: output\tasks.txt
```

### Full Desktop Widget Experience
```powershell
# Complete setup with wallpaper effects and desktop display
.\scripts\todoistRefresh.ps1
```

### Custom Options
```powershell
# Use different API key
.\scripts\todoistRefresh.ps1 -ApiKey "your_different_token"

# Skip wallpaper processing (faster)
.\scripts\todoistRefresh.ps1 -SkipWallpaper

# Use custom config file
.\scripts\todoistRefresh.ps1 -ConfigPath "my_config.json"
```

## ⚙️ How It Works

1. **C++ Application** (`src/main.cpp`) - Connects to Todoist API and fetches tasks
2. **PowerShell Script** (`scripts/todoistRefresh.ps1`) - Orchestrates the whole process
3. **Configuration** (`config/config.local.json`) - Stores your settings and API key
4. **Output File** - Tasks saved in text format for display
5. **Rainmeter** (optional) - Reads the text file and displays it on desktop

## Building

### Quick Build
```bash
make
```

### Available Commands
- `make` - Build main executable
- `make debug` - Build debug version  
- `make install` - Install to startup directory
- `make test` - Run with test parameters
- `make clean` - Clean build artifacts
- `make help` - Show all available targets

### Manual Build
See [`docs/BUILD.md`](docs/BUILD.md) for detailed build instructions and troubleshooting.

## Usage

### Automated Execution (Recommended)
```powershell
# Full automation with configuration file
.\scripts\todoistRefresh.ps1

# Skip wallpaper processing
.\scripts\todoistRefresh.ps1 -SkipWallpaper

# Skip Rainmeter operations  
.\scripts\todoistRefresh.ps1 -SkipRainmeter

# Use different API key
.\scripts\todoistRefresh.ps1 -ApiKey "your_token"
```

### Direct Execution
```bash
# Basic usage
.\build\TodoistTaskFetcher.exe <API_KEY> <OUTPUT_PATH>

# With custom filter
.\build\TodoistTaskFetcher.exe <API_KEY> <OUTPUT_PATH> <FILTER>

# Example
.\build\TodoistTaskFetcher.exe "your_api_token" "output\tasks.txt" "#Inbox"
```

## Output Format

The application generates a numbered task list:
```
TASKS:
1) Complete project documentation
2) Review code changes
3) Schedule team meeting
```

## Task Filtering

The application filters tasks based on:
- **Source**: Only tasks from the Inbox (#Inbox filter)
- **Due Date**: Tasks with no due date, or due today/overdue
- **Status**: Only incomplete tasks

## Rainmeter Integration

The PowerShell script integrates with Rainmeter by:
- Creating a blurred wallpaper background at 16:10 aspect ratio
- Saving image dimensions for proper scaling
- Activating Todoist skins (`Todoist` and `Todoist\Mail`)
- Refreshing skins with new task data

## Error Handling

The application includes error handling for:
- Invalid API tokens (HTTP 401/403 responses)
- Network connectivity issues
- File I/O operations
- Missing command-line arguments

## Development

### Adding Features

To extend functionality:
1. Modify `todoistArg.cpp` for API changes
2. Update the PowerShell script for additional Rainmeter integration
3. Adjust the makefile for new dependencies

### Debugging

- Check API response codes for authentication issues
- Verify file paths exist and are writable
- Ensure ImageMagick is properly installed
- Test Rainmeter commands manually if automation fails

## License

This project is provided as-is for personal use and automation of Todoist task display on Windows desktops.

## Contributing

Feel free to submit issues and enhancement requests. When contributing:
1. Test changes on Windows 10/11
2. Ensure compatibility with current Todoist API
3. Maintain backwards compatibility with existing Rainmeter skins
